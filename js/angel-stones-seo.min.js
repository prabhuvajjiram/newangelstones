/**
 * Angel Stones SEO & Performance Enhancements
 * Consolidated optimization script for granite colors
 * v1.0.0
 */
document.addEventListener("DOMContentLoaded",function(){function e(e){if(!e)return;const t=document.title.split("|")[1]?document.title.split("|")[1].trim():"Angel Granites";document.title=`${e} Granite | ${t}`;let n=document.querySelector('meta[name="description"]');n&&n.setAttribute("content",`Premium ${e} granite for monuments and headstones. Explore our selection of high-quality granite colors.`)}function t(e){if(!e)return;const t=document.querySelector("#color-schema");t&&t.remove();const n=document.createElement("script");n.type="application/ld+json",n.id="color-schema";const o={"@context":"https://schema.org/","@type":"Product","name":`${e} Granite`,"description":`Premium ${e} granite for monuments and headstones, available from Angel Stones.`,"image":window.location.origin+"/images/colors/default.jpg","category":"Granite Colors","brand":{"@type":"Brand","name":"Angel Stones"},"offers":{"@type":"Offer","url":window.location.href,"priceCurrency":"USD","availability":"https://schema.org/InStock"}};n.textContent=JSON.stringify(o),document.head.appendChild(n)}function n(e){if(!e)return;const t=e.toLowerCase().replace(/\s+/g,"-");window.location.hash=`/colors/${t}`}function o(){if(!window.location.hash)return;const o=window.location.hash;if(o.includes("/colors/")){const r=o.split("/colors/")[1],i=r.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());setTimeout(()=>{const o=document.querySelectorAll(".color-item, .color-scroll-item, .color-grid-item");let r=!1;o.forEach(o=>{const s=o.querySelector(".caption p, .color-name");s&&s.textContent.trim().toLowerCase()===i.toLowerCase()&&(r=!0,e(i),t(i),n(i),o.click(),setTimeout(()=>{o.scrollIntoView({behavior:"smooth",block:"center"}),o.classList.add("color-highlight"),setTimeout(()=>{o.classList.remove("color-highlight")},2e3)},300))})},1e3)}}function r(){const o=document.querySelectorAll(".color-item, .color-scroll-item, .color-grid-item");o.forEach(o=>{const r=o.querySelector(".caption p, .color-name");if(!r)return;const i=r.textContent.trim();o.setAttribute("data-color-name",i),o.setAttribute("itemscope",""),o.setAttribute("itemtype","https://schema.org/Product");const s=document.createElement("meta");s.setAttribute("itemprop","name"),s.setAttribute("content",`${i} Granite`),o.appendChild(s);const a=o.querySelector("img");a&&(a.alt=`${i} Granite - Premium Monument Stone`,a.title=`${i} Granite`,a.setAttribute("itemprop","image"),a.setAttribute("loading","lazy"),a.setAttribute("width","300"),a.setAttribute("height","300")),o.addEventListener("click",()=>{e(i),t(i),n(i)})})}function i(){const e=document.querySelectorAll('form[role="search"], .search-form, #search-form');e.forEach(e=>{e.classList.contains("seo-enhanced")||(e.classList.add("seo-enhanced"),e.addEventListener("submit",function(){const t=e.querySelector('input[type="search"], input[type="text"]');if(!t||!t.value.trim())return;const o=t.value.trim();/^[a-zA-Z\s]+$/.test(o)&&o.length>3&&n(o)}))})}function s(){console.log("Applying accessibility fixes to modals...");const e=document.querySelectorAll(".modal");e.forEach(e=>{const t=new MutationObserver(t=>{t.forEach(t=>{"style"!==t.attributeName&&"class"!==t.attributeName||(e.classList.contains("show")||"none"!==window.getComputedStyle(e).display)&&(e.removeAttribute("aria-hidden"),e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').forEach(e=>{e.removeAttribute("aria-hidden"),e.hasAttribute("tabindex")&&"-1"===e.getAttribute("tabindex")&&e.setAttribute("tabindex","0")}))})});t.observe(e,{attributes:!0,attributeFilter:["style","class"]})}),document.querySelectorAll("img:not([alt])").forEach(e=>{e.alt="Angel Stones granite product image"})}r(),o(),i(),s(),document.addEventListener("click",function(o){const r=o.target.closest(".color-item, .color-scroll-item, .color-grid-item, [data-color-name]");if(r){const o=r.getAttribute("data-color-name")||r.querySelector(".caption p, .color-name")?.textContent.trim();o&&(e(o),t(o),n(o))}}),window.ColorSEO={updateColorMetadata:e,updateColorSchema:t,updateUrlFragment:n,enhanceColorItems:r}});
